def getPost(idp):
    conn = sqlite3.connect('data.db')
    cur = conn.cursor()
    q = "SELECT * FROM posts WHERE posts.pid = %d"
    result = cur.execute(q%idp).fetchone()
    return result

def getUserId(name):
    conn = sqlite3.connect('data.db')
    cur = conn.cursor()
    q = 'SELECT users.id FROM users WHERE users.name = %s'
    result = conn.execute(q%name).fetchone()
    print result
    return result[0]

def addUser(username,password):
    conn = sqlite3.connect('data.db')
    cur = conn.cursor()
    q = 'SELECT users.name FROM users WHERE users.name = %s'
    result = cur.execute(q%username)
    print len(result)
    if len(result) == 0:
        q = 'SELECT max(users.id) FROM users'
        uid = cur.execute(q).fetchone()[0]
        q = 'INSERT INTO users VALUES (?, ?, ?)'
        cur.execute(q, (username, encrypt(password), uid+1))
        return True
    return False

def getPost(idp):
    conn = sqlite3.connect('data.db')
    cur = conn.cursor()
    q = "SELECT * FROM posts WHERE posts.pid = %d"
    result = cur.execute(q%idp).fetchone()
    return result